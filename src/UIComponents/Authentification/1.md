# Authenticator

Un moyen simple d'ajouter des flux d'authentification dans votre application est d'utiliser le composant Authenticator. Le composant Authenticator encapsule un flux d'authentification dans le framework de votre choix et est soutenu par les ressources cloud configurées dans vos ressources cloud Auth.

## Installation

```bash
yarn add aws-amplify @aws-amplify/ui-vue
```

## Utilisation

### Utilisation recommandée

Dans la plupart des cas, vous devrez gérer séparément le rendu et la mise en page de l'authentificateur.

App.vue

```html
<template>
  <div>
    <div v-if="authState !== 'signedin'">You are signed out.</div>
    <amplify-authenticator>
      <div v-if="authState === 'signedin' && user">
        <div>Hello, {{user.username}}</div>
      </div>
      <amplify-sign-out></amplify-sign-out>
    </amplify-authenticator>
  </div>
</template>
```

```js
import { onAuthUIStateChange } from "@aws-amplify/ui-components";

export default {
  name: "AuthStateApp",
  created() {
    this.unsubscribeAuth = onAuthUIStateChange((authState, authData) => {
      this.authState = authState;
      this.user = authData;
    });
  },
  data() {
    return {
      user: undefined,
      authState: undefined,
      unsubscribeAuth: undefined,
    };
  },
  beforeDestroy() {
    this.unsubscribeAuth();
  },
};
```

_main.js_

```js
import Vue from "vue";
import App from "./App.vue";
import "@aws-amplify/ui-vue";
import Amplify from "aws-amplify";
import awsconfig from "./aws-exports";

Amplify.configure(awsconfig);

new Vue({
  render: (h) => h(App),
}).$mount("#app");
```

_App.vue_

```Html
<template>
  <amplify-authenticator>
    <div>
      My App
      <amplify-sign-out></amplify-sign-out>
    </div>
  </amplify-authenticator>
</template>
```

:::tips
Pour activer le gestionnaire de mots de passe, intégrez le composant Authenticator au composant `amplify-auth-container`.

```html
<amplify-auth-container>
  <amplify-authenticator></amplify-authenticator>
</amplify-auth-container>
```

:::

## Propriétés

`amplify-authenticator` fournit les propriétés suivantes pour configurer le composant.

| fédéré      |                                                          |
| ----------- | -------------------------------------------------------- |
| Description | Configuration et informations d'identification fédérées. |
| Type        |  FederatedConfig                                         |

|  handleAuthStateChange |                                                                         |
| ---------------------- | ----------------------------------------------------------------------- |
| Description            |  Rappel pour les changements de la machine d'état de l'authentificateur |
| Type                   |  (nextAuthState : AuthState, data? : object) => void                    |
|  Default               | () => {}                                                                |

|  initialAuthState |                                                                                                                                                 |
| ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
|   Attribut        |  initial-auth-state                                                                                                                             |
|  Description      |  État initial de départ du composant Authenticator. Par exemple, si `signup` est passé, le composant par défaut est défini comme AmplifySignUp. |
| Type              | AuthState.SignIn / AuthState.SignUp                                                                                                             |
|  Défaut           |  AuthState.SignIn                                                                                                                               |

| usernameAlias |                                                                                                                                          |
| ------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
|  Attribut     |  nom d'utilisateur-alias                                                                                                                 |
|  Description  |  L'alias du nom d'utilisateur est utilisé pour configurer l'authentification avec `nom d'utilisateur`, `email` ou `numéro de téléphone`. |
|  Type         |  "email" / "numéro de téléphone" / "nom d'utilisateur".                                                                                  |

## Emplacements

`amplify-authenticator` fournit les slots suivants, basés sur l'élément [Web Components slot](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot).

|  Nom                   |  Description                                                                                                                                                          |     |
| ---------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --- |
| `confirm-sign-in`      |  Contenu placé à l'intérieur du flux de travail de confirmation de l'inscription, lorsqu'un utilisateur a besoin de confirmer le compte avec lequel il s'est inscrit. |
| `confirm-sign-up`      |  Contenu placé à l'intérieur du workflow de confirmation de l'inscription, lorsqu'un utilisateur doit confirmer le compte avec lequel il s'est inscrit.               |
| `forgot-password`      | Contenu placé dans le flux de travail "Mot de passe oublié" lorsqu'un utilisateur souhaite réinitialiser son mot de passe.                                            |
| `greetings`            | Contenu placé dans la navigation des salutations lorsqu'un utilisateur est connecté.                                                                                  |
| `loading`              | Contenu placé à l'intérieur du flux de travail de chargement pour le chargement de l'application.                                                                     |
| `require-new-password` | Contenu placé dans le workflow de demande de nouveau mot de passe lorsqu'un utilisateur doit mettre à jour son mot de passe.                                          |
| `sign-in`              | Contenu placé à l'intérieur du flux de travail d'ouverture de session lorsqu'un utilisateur souhaite se connecter à son compte.                                       |
| `sing-up`              | Contenu placé à l'intérieur du workflow d'inscription lorsqu'un utilisateur souhaite créer un nouveau compte.                                                         |
| `totp-setup`           | Contenu placé dans le flux de travail totp-setup lorsqu'un utilisateur choisit d'utiliser TOTP MFA.                                                                   |
| `verify-contact`       | Contenu placé à l'intérieur du flux de travail verify-contact lorsqu'un utilisateur doit vérifier ses informations de contact.                                        |

## Propriétés CSS personnalisées

`amplify-authenticator` fournit les [propriétés CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) suivantes pour modifier le style au niveau du composant.

|  Nom                  |  Description                                                    |
| --------------------- | --------------------------------------------------------------- |
| `--background-color`  | Couleur d'arrière-plan du conteneur                             |
| `--border-radius`     | Rayon de la bordure du conteneur                                |
| `--box-shadow`        | Ombre de l'arc du conteneur                                     |
| `--container-align`   | Propriété `align-items` d'un conteneur flexible.                |
| `--container-display` | Option d'affichage du conteneur. La valeur par défaut est flex. |
| `--container-height`  | Hauteur du conteneur. La valeur par défaut est 100vh.           |
| `--container-justify` | Propriété `justify-content` d'un conteneur flex.                |
| `--margin-bottom`     | Marge en dessous du composant                                   |
| `--min-width`         | Largeur minimale du conteneur                                   |
| `--padding`           | Marge à l'intérieur du composant                                |
| `--width`             | Largeur du conteneur                                            |

## Personnalisation

### Champs de formulaire personnalisés

Si vous souhaitez personnaliser les champs de formulaire dans le composant Authenticator Sign In ou Sign Up, vous pouvez le faire en utilisant la propriété `formFields`.

L'exemple suivant illustre l'utilisation d'Authenticator avec des champs de formulaire d'inscription personnalisés et [authentification par email](https://docs.amplify.aws/ui/auth/authenticator/q/framework/vue/#authenticate-with-email-or-phone-number) :

```html
<template>
  <amplify-authenticator username-alias="email">
    <amplify-sign-up
      slot="sign-up"
      username-alias="email"
      :form-fields.prop="formFields"
    ></amplify-sign-up>
    <amplify-sign-in slot="sign-in" username-alias="email"></amplify-sign-in>
  </amplify-authenticator>
</template>
```

Si vous avez configuré `eslint-plugin-vue`, il vous sera suggéré d'utiliser `v-slots` sur Vue 3 ou plus. Cela s'applique à la spécification des slots des composants Vue mais pas à celle des composants Web. Vous pouvez désactiver cette règle pour éviter l'erreur.

```js
<script>
export default {
  name: 'AuthWithSlots',
  data() {
    return {
      formFields: [
        {
          type: 'email',
          label: 'Custom Email Label',
          placeholder: 'Custom email placeholder',
          inputProps: { required: true, autocomplete: 'username' },
        },
        {
          type: 'password',
          label: 'Custom Password Label',
          placeholder: 'Custom password placeholder',
          inputProps: { required: true, autocomplete: 'new-password' },
        },
        {
          type: 'phone_number',
          label: 'Custom Phone Label',
          placeholder: 'Custom phone placeholder',
        },
      ]
    }
  }
}
</script>
```

Voici un exemple d'utilisation du composant :

Si vous utilisez la prop `usernameAlias` avec des `slots` personnalisés, gardez à l'esprit que vous devez passer la valeur de la prop `usernameAlias` à la fois à l'Authenticator et au composant slotté personnalisé puisque le composant slotté remplace la configuration passée depuis l'Authenticator.

Pour plus de détails sur cette personnalisation, consultez la documentation `amplify-form-field` [](https://github.com/aws-amplify/amplify-js/tree/main/packages/amplify-ui-components/src/components/amplify-form-field#properties)prop et l'interface interne [](https://github.com/aws-amplify/amplify-js/blob/main/packages/amplify-ui-components/src/components/amplify-auth-fields/amplify-auth-fields-interface.ts#L3)`FormFieldType`.

### Masquer les champs de formulaire

Souvent, vous n'aurez pas besoin d'un champ de formulaire par défaut, par exemple le champ du numéro de téléphone. Pour cela, vous pouvez définir le tableau des champs que vous souhaitez afficher (ainsi que les personnalisations facultatives des champs).

Dans cet exemple, nous gérons également l'état d'authentification pour afficher et masquer le composant Authenticator en fonction de l'état d'authentification de l'utilisateur. Ce code persistera également l'état d'authentification de l'utilisateur lors du rafraîchissement.

\_App.vue

```html
<template>
  <div>
    <amplify-authenticator
      v-if="authState !== 'signedin'"
    ></amplify-authenticator>
    <div v-if="authState === 'signedin' && user">
      <amplify-sign-out></amplify-sign-out>
      <div>Hello, {{user.username}}</div>
    </div>
  </div>
</template>
```

```js
import { onAuthUIStateChange } from "@aws-amplify/ui-components";

export default {
  name: "AuthStateApp",
  created() {
    this.unsubscribeAuth = onAuthUIStateChange((authState, authData) => {
      this.authState = authState;
      this.user = authData;
    });
  },
  data() {
    return {
      user: undefined,
      authState: undefined,
      unsubscribeAuth: undefined,
      formFields: [
        { type: "username" },
        { type: "password" },
        { type: "email" },
      ],
    };
  },
  beforeDestroy() {
    this.unsubscribeAuth();
  },
};
```

### Gestion de la mise en page avec CSS

Comme les composants de l'interface utilisateur sont mis en œuvre à l'aide de composants Web, vous pouvez contrôler le composant supérieur `amplify-authenticator` directement à l'aide de CSS.

```css
amplify-authenticator {
  display: flex;
  justify-content: center;
  align-items: center;
  flex: 1;
  height: 100vh;
}
```

## Composants

### Sign In

**Utilisation**

```html
<amplify-authenticator>
  <amplify-sign-in
    header-text="My Custom Sign In Text"
    slot="sign-in"
  ></amplify-sign-in>
</amplify-authenticator>
```

#### Propriétés

`amplify-sign-in` fournit les propriétés suivantes pour configurer le composant.

| fédéré       |                                                           |
| ------------ | --------------------------------------------------------- |
|  Description |  Informations d'identification et configuration fédérées. |
|  Type        |  FederatedConfig                                          |   |

| FormFields  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Description | Les champs de formulaire vous permettent d'utiliser nos composants prédéfinis tels que le champ du nom d'utilisateur, le champ du code, le champ du mot de passe, le champ de l'adresse électronique, etc. en passant un tableau de chaînes de caractères que vous souhaitez voir apparaître dans l'ordre du formulaire. Si vous avez besoin d'une personnalisation plus poussée, comme la modification du texte d'une étiquette ou l'ajustement d'un espace réservé, vous pouvez suivre la structure ci-dessous pour y parvenir. `[ { type : string, label : string, placeholder : string, hint : string | Functional Component | null, required : boolean } ]` |
| Type        |  FormFieldTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | string[] |
| Défaut      | []                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

| handleAuthStateChange |                                                                        |
| --------------------- | ---------------------------------------------------------------------- |
| Description           | Gestionnaire de changement d'état d'authentification pour ce composant |
| Type                  |  (nextAuthState : AuthState, data? : object) => void                   |
| Default               |  dispatchAuthStateChangeEvent                                          |

| handleSubmit |                                                         |
| ------------ | ------------------------------------------------------- |
| Description  | S'active lorsque le formulaire d'inscription est soumis |
| Type         |  (event : Event) => void                                |
|  Default     |  event => this.signIn(event)                            |

| headerText |                                                                 |
| ---------- | --------------------------------------------------------------- |
| Attribut   |  header-text                                                    |
| Desciption | Utilisé pour le texte d'en-tête dans le composant d'inscription |
| Type       |  chaîne de caractères                                           |
| Default    |  Translations.SIGN_IN_HEADER_TEXT                               |

| hideSignUp |                              |
| ---------- | ---------------------------- |
|  Attribut  | hide-sign-up                 |   |
| Desciption | Masque le lien d'inscription |
| Type       |  booléen                     |
| Default    |  false                       |

| submitButtonText |                                                                          |
| ---------------- | ------------------------------------------------------------------------ |
|  Attribut        | submit-button-text                                                       |   |
| Desciption       | Utilisé pour le texte du bouton d'envoi dans le composant d'inscription. |
| Type             |  chaîne de caractères                                                    |
| Default          |  Translations.SIGN_IN_ACTION                                             |

| usernameAlias |                                                                                                                                         |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
|  Attribut     | nom d'utilisateur-alias                                                                                                                 |   |
| Desciption    | L'alias du nom d'utilisateur est utilisé pour configurer l'authentification avec `nom d'utilisateur`, `email` ou `numéro de téléphone`. |
| Type          |  "email"                                                                                                                                | "numéro de téléphone" | "nom d'utilisateur". |
| Default       |  Nom d'utilisateur                                                                                                                      |

#### Propriétés CSS personnalisées

`amplify-sign-in` fournit les [propriétés CSS] suivantes (https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) pour modifier le style au niveau du composant.

|  Nom                                   |  Description                           |
| -------------------------------------- | -------------------------------------- |
|  `--footer-color`                      |  Couleur de la police du pied de page  |   |
|  `--footer-font-family` (Pied de page) |  Famille de caractères du pied de page |   |
|  `--footer-font-size`                  |  Taille de la police du pied de page   |   |
|  `--footer-weight`                     |   Poids de la police du pied de page   |

#### Emplacements

`amplify-sign-in` fournit les emplacements suivants, basés sur l'élément [Web Components slot](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot).

| Nom                        |  Description                                                                                       |
| -------------------------- | -------------------------------------------------------------------------------------------------- |
|  `federated-buttons`       |  Contenu au-dessus des champs de formulaire utilisés pour les boutons de fédération d'inscription. |
| `footer`                   | Le contenu est placé dans le pied de page du composant.                                            |
| `header-subtitle`          |  Contenu du sous-titre placé sous le texte de l'en-tête                                            |
| `primary-footer-content`   |  Contenu placé sur le côté droit du pied de page.                                                  |
| `secondary-footer-content` |  Contenu placé sur le côté gauche du pied de page.                                                 |

### S'inscrire

**Utilisation**

```html
<amplify-authenticator>
  <amplify-sign-up
    header-text="My Custom Sign Up Text"
    slot="sign-up"
  ></amplify-sign-up>
</amplify-authenticator>
```

#### Propriétés

`amplify-sign-up` fournit les propriétés suivantes pour configurer le composant.

|  formFields |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |          |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| Description | Les champs du formulaire vous permettent d'utiliser nos composants prédéfinis tels que le champ du nom d'utilisateur, le champ du code, le champ du mot de passe, le champ de l'adresse électronique, etc. en passant un tableau de chaînes de caractères que vous souhaitez voir apparaître dans l'ordre du formulaire. Si vous avez besoin d'une personnalisation plus poussée, comme la modification du texte d'une étiquette ou l'ajustement d'un espace réservé, vous pouvez suivre la structure ci-dessous pour ce faire. `[ { type : string, label : string, placeholder : string, hint : string | Functional Component | null, required : boolean } ]` |
|  Type       |  FormFieldTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | string[] |
|  Défaut     |  []                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |          |

|  handleAuthStateChange |                                                                                                                                           |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| Description            |  Gestionnaire de changement d'état d'authentification pour ce composant, par exemple, connexion -> lien "Créer un compte" -> inscription. |
|  Type                  | (nextAuthState : AuthState, data? : object) => void                                                                                       |   |
|  Défaut                |  dispatchAuthStateChangeEvent                                                                                                             |

|  handleSubmit |                                                          |
| ------------- | -------------------------------------------------------- |
| Description   |  S'active lorsque le formulaire d'inscription est soumis |
| Type          |  (event : Event) => void                                 |   |
|  Défault      | event => this.signUp(event)                              |

| haveAccountText |                                                                           |
| --------------- | ------------------------------------------------------------------------- |
| Attribut        |  have-account-text                                                        |   |
|  Description    |  Utilisé pour le texte du bouton d'envoi dans le composant d'inscription. |
|  Type           |  chaîne de caractères                                                     |
|  Défaut         | Translations.SIGN_UP_HAVE_ACCOUNT_TEXT                                    |

|  headerText  |                                                                  |
| ------------ | ---------------------------------------------------------------- |
| Attribut     |  header-text                                                     |
|  Description |  Utilisé pour le texte d'en-tête dans le composant d'inscription |
| Type         | chaîne de caractères                                             |
| Défaut       | Translations.SIGN_UP_HEADER_TEXT                                 |

|  signInText |                                              |
| ----------- | -------------------------------------------- |
|  Attribut   | sign-in-text                                 |
| Description | Texte utilisé pour l'hyperlien d'inscription |
| Type        |  chaîne de caractères                        |
|  Default    | Translations.SIGN_IN_TEXT                    |

|  submitButtonText |                                                                           |
| ----------------- | ------------------------------------------------------------------------- |
|  Attribut         |  submit-button-text                                                       |
|  Description      |  Utilisé pour le texte du bouton d'envoi dans le composant d'inscription. |
|  Type             |  chaîne de caractères                                                     |
|  Défaut           |  Translations.SIGN_UP_SUBMIT_BUTTON_TEXT                                  |

| usernameAlias |                                                                                                                                         |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
|  Attribut     |  nom d'utilisateur-alias                                                                                                                |
|  Description  | L'alias du nom d'utilisateur est utilisé pour configurer l'authentification avec `nom d'utilisateur`, `email` ou `numéro de téléphone`. |
|  Type         |  "email" / "numéro de téléphone" / "nom d'utilisateur".                                                                                 |
|  Défaut       | nom d'utilisateur                                                                                                                       |   |

| validationErrors
| --- | --- |
|Attribut| validation-errors|
|Description| S'engage lorsque des actions invalides se produisent, comme un champ manquant, etc.|
|Type| chaîne de caractères|

#### Propriétés CSS personnalisées

`amplify-sign-up` fournit les [propriétés CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) suivantes pour modifier le style au niveau du composant.

Nom Description
| --- | --- |
|`--footer-color` |Couleur de la police du pied de page|
|`--footer-font-family` | Famille de caractères du pied de page|
|`--footer-font-size` | Taille de la police du pied de page|
|`--footer-weight` | Poids de la police du pied de page|

#### Emplacements

`amplify-sign-up` fournit les emplacements suivants, basés sur l'élément [Web Components slot](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot).

| Nom                        |  Description                                            |
| -------------------------- | ------------------------------------------------------- |
| `footer`                   |  Contenu placé dans le pied de page du composant        |
| `header-subtitle`          |  Contenu du sous-titre placé sous le texte de l'en-tête |
| `primary-footer-content`   |  Contenu placé sur le côté droit du pied de page.       |
| `secondary-footer-content` |  Contenu placé sur le côté gauche du pied de page.      |

### Sign Out

**Utilisation**

```Html
<div>
  My App
  <amplify-sign-out button-text="Custom Text"></amplify-sign-out>
</div>
```

#### Propriétés

`amplify-sign-out` fournit les propriétés suivantes pour configurer le composant.

| buttonText          |                                               |
| ------------------- | --------------------------------------------- |
| Attribut            |  button-text                                  |
| Description         |  Texte à l'intérieur du bouton de déconnexion |
| Type                |  chaîne de caractères                         |
| Valeur par défaut : |  Translations.SIGN_OUT                        |

| handleAuthStateChange |                                                                         |
| --------------------- | ----------------------------------------------------------------------- |
| Description           |  Gestionnaire de changement d'état d'authentification pour ce composant |
| Type                  |  (nextAuthState : AuthState, data? : object) => void                    |
|  Par défaut,          |  dispatchAuthStateChangeEvent                                           |

#### Slots

`amplify-sign-out` fournit les slots suivants basés sur l'élément [Web Components slot](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot).

| Nom        |  Description                     |
| ---------- | -------------------------------- |
| `sign-out` |  L'élément bouton de déconnexion |

### Confirmer l'inscription

**Utilisation**

```html
<amplify-authenticator>
  <amplify-confirm-sign-in
    header-text="My Custom Confirm Sign In Text"
    slot="confirm-sign-in"
  ></amplify-confirm-sign-in>
</amplify-authenticator>
```

#### Propriétés

`amplify-confirm-sign-in` fournit les propriétés suivantes pour configurer le composant.

| formFields  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Description | Les champs du formulaire vous permettent d'utiliser nos composants prédéfinis tels que le champ du nom d'utilisateur, le champ du code, le champ du mot de passe, le champ de l'adresse électronique, etc. en passant un tableau de chaînes de caractères que vous souhaitez voir apparaître dans l'ordre du formulaire. Si vous avez besoin d'une personnalisation plus poussée, comme la modification du texte d'une étiquette ou l'ajustement d'un espace réservé, vous pouvez suivre la structure ci-dessous pour ce faire. `[ { type : string, label : string, placeholder : string, hint : string | Functional Component | null, required : boolean } ]` |
| Type        |  FormFieldTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | string[] |
| Défaut      |  [ {type : 'code', required : true, handleInputChange : event => this.handleCodeChange(event), }, ]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

| handleAuthStateChange |                                                                         |
| --------------------- | ----------------------------------------------------------------------- |
| Description           |  Gestionnaire de changement d'état d'authentification pour ce composant |
| Type                  |  (nextAuthState : AuthState, data? : object) => void                    |
| Par défaut,           |  dispatchAuthStateChangeEvent                                           |

|  handleSubmit |                                                                         |
| ------------- | ----------------------------------------------------------------------- |
| Description   | S'active lorsque le formulaire de confirmation d'inscription est soumis |
| Type          | (event : Event) => void                                                 |
| Défaut        | event => this.confirm(event)                                            |

| headerText          |                                                                                     |
| ------------------- | ----------------------------------------------------------------------------------- |
| Attribut            | header-text                                                                         |
| Description         | Utilisé pour le texte de l'en-tête dans le composant de confirmation d'inscription. |
| Type                | Chaîne de caractères                                                                |
| Valeur par défaut : |  Translations.CONFIRM_SMS_CODE                                                      |

|  submitButtonText            |                                                                                           |
| ---------------------------- | ----------------------------------------------------------------------------------------- |
|  Attribut submit-button-text |                                                                                           |
|  Description                 |  Utilisé pour le texte du bouton d'envoi dans le composant de confirmation d'inscription. |   |
|  Type                        |  chaîne de caractères                                                                     |   |
|  Valeur par défaut :         |  Translations.CONFIRM                                                                     |   |

| user         |                                    |
| ------------ | ---------------------------------- |
|  Description |  Utilisateur Cognito se connectant |   |
|  Type        |  CognitoUserInterface              |   |

### Confirmer l'inscription

**Usage**

```html
<amplify-authenticator>
  <amplify-confirm-sign-up
    header-text="My Custom Confirm Sign Up Text"
    slot="confirm-sign-up"
  ></amplify-confirm-sign-up>
</amplify-authenticator>
```

#### Propriétés

`amplify-confirm-sign-up` fournit les propriétés suivantes pour configurer le composant.

| formFields   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|  Description |  Les champs du formulaire vous permettent d'utiliser nos composants prédéfinis tels que le champ du nom d'utilisateur, le champ du code, le champ du mot de passe, le champ de l'adresse électronique, etc. en passant un tableau de chaînes de caractères que vous souhaitez voir apparaître dans l'ordre du formulaire. Si vous avez besoin d'une personnalisation plus poussée, comme la modification du texte d'une étiquette ou l'ajustement d'un espace réservé, vous pouvez suivre la structure ci-dessous pour ce faire. `[ { type : string, label : string, placeholder : string, hint : string | Functional Component | null, required : boolean } ]` |   |
|  Type        |  FormFieldTypes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | string[] |   |
|  Défaut      |  []                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |   |

| handleAuthStateChange |                                                                                                                                              |
| --------------------- | -------------------------------------------------------------------------------------------------------------------------------------------- |
| Description           |  Gestionnaire de changement de l'état d'authentification pour ce composant, par exemple, connexion -> lien "Créer un compte" -> inscription. |
| Type                  |  (nextAuthState : AuthState, data? : object) => void                                                                                         |
| Par défaut,           |  dispatchAuthStateChangeEvent                                                                                                                |

| handleSubmit |                                                          |
| ------------ | -------------------------------------------------------- |
| Description  |  S'active lorsque le formulaire d'inscription est soumis |
| Type         |  (submitEvent : Event) => void                           |
| Par défaut,  |  event => this.confirmSignUp(event)                      |

| headerText  |                                                                                  |
| ----------- | -------------------------------------------------------------------------------- |
| Attribut    | header-text                                                                      |
| Description | Utilisé pour le texte d'en-tête dans le composant de confirmation d'inscription. |
| Type        | chaîne de caractères                                                             |
| Défaut      | Translations.CONFIRM_SIGN_UP_HEADER_TEXT                                         |

| submitButtonText |                                                                                          |
| ---------------- | ---------------------------------------------------------------------------------------- |
| Attribut         | submit-button-text                                                                       |
| Description      | Utilisé pour le texte du bouton d'envoi dans le composant de confirmation d'inscription. |
| Type             | chaîne de caractères                                                                     |
| Défaut           | Traductions.CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT                                           |

|  user       |                                                                    |
| ----------- | ------------------------------------------------------------------ |
| Description | Utilisé pour le nom d'utilisateur à transmettre au code de renvoi. |
| Type        | CognitoUserInterface                                               |

| usernameAlias |                                                                                                                                         |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Attribut      | nom d'utilisateur-alias                                                                                                                 |
| Description   | L'alias du nom d'utilisateur est utilisé pour configurer l'authentification avec `nom d'utilisateur`, `email` ou `numéro de téléphone`. |
| Type          | "email" / "numéro de téléphone" / "nom d'utilisateur".                                                                                  |
| Défaut        | nom d'utilisateur                                                                                                                       |

### Mot de passe oublié

**Utilisation**

```html
<amplify-authenticator>
  <amplify-forgot-password
    header-text="My Custom Forgot Password Text"
    slot="forgot-password"
  ></amplify-forgot-password>
</amplify-authenticator>
```

#### Propriétés

`amplify-forgot-password` fournit les propriétés suivantes pour configurer le composant.

| formFields        |                                                                               |
| ----------------- | ----------------------------------------------------------------------------- |
| Description       |  Les champs du formulaire affichés dans le formulaire de mot de passe oublié. |
| Type              |  FormFieldTypes / string[]                                                    |
| Valeur par défaut |  []                                                                           |

| handleAuthStateChange | |
| | --- | --- | |
| Description | Gestionnaire de changement d'état d'authentification pour ce composant|
| Type | (nextAuthState : AuthState, data? : object) => void|
| Par défaut, | dispatchAuthStateChangeEvent|

| handleSend  |                                                                              |
| ----------- | ---------------------------------------------------------------------------- |
| Description |  La fonction appelée lors d'une demande de réinitialisation du mot de passe. |
| Type        |  (event : Event) => void                                                     |
| Par défaut, |  event => this.send(event)                                                   |

|  handleSubmit | .                                                                    |
| ------------- | -------------------------------------------------------------------- |
| Description   |  La fonction appelée lors de la soumission d'un nouveau mot de passe |
| Type          |  (event : Event) => void                                             |
| Par défaut,   |  event => this.submit(event)                                         |

|  headerText         | .                                                           |
| ------------------- | ----------------------------------------------------------- |
| Attribut            |  header-text                                                |
| Description         |  Le texte de l'en-tête de la section "Mot de passe oublié". |
| Type                |  chaîne de caractères                                       |
| Valeur par défaut : |  Translations.RESET_YOUR_PASSWORD                           |

|  sendButtonText     | .                                                                        |
| ------------------- | ------------------------------------------------------------------------ |
| Attribut            |  send-button-text                                                        |
| Description         |  Le texte affiché à l'intérieur du bouton de code d'envoi du formulaire. |
| Type                |  chaîne de caractères                                                    |
| Valeur par défaut : |  Translations.SEND_CODE                                                  |

|  submitButtonText   | .                                                                |
| ------------------- | ---------------------------------------------------------------- |
| Attribut            |  submit-button-text                                              |
| Description         |  Le texte affiché à l'intérieur du bouton d'envoi du formulaire. |
| Type                |  chaîne de caractères                                            |
| Valeur par défaut : |  Traductions.SUBMIT                                              |

|  usernameAlias |
| -------------- |
| Attribut       |  nom d'utilisateur-alias |
| Description    |  L'alias du nom d'utilisateur est utilisé pour configurer l'authentification avec `nom utilisateur`, `email` ou `numéro de téléphone`. |
| Type           |  "email" | "numéro de téléphone" | "nom d'utilisateur". |
| Défaut         |  nom d'utilisateur |

### Demander un nouveau mot de passe

**Usage**

```html
<amplify-authenticator>
  <amplify-require-new-password
    header-text="My Custom Require New Password Text"
    slot="require-new-password"
  ></amplify-require-new-password>
</amplify-authenticator>
```

#### Propriétés

`amplify-require-new-password` fournit les propriétés suivantes pour configurer le composant.

| formFields   |  .                                                                                                                                                                                                                                                                                                                 |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|  Description |  Les champs du formulaire affichés dans le formulaire de mot de passe oublié.                                                                                                                                                                                                                                      |
|  Type        |  FormFieldTypes                                                                                                                                                                                                                                                                                                    |
|  Par défaut, |  [ { type : AuthFormField.Password, required : true, handleInputChange : event => this. handlePasswordChange(event), label : I18n.get(Translations.NEW_PASSWORD_LABEL), placeholder : I18n.get(Translations.NEW_PASSWORD_PLACEHOLDER), inputProps : { 'data-test' : 'require-new-password-password-input', }, }, ] |

| handleAuthStateChange | .                                                                       |
| --------------------- | ----------------------------------------------------------------------- |
|  Description          |  Gestionnaire de changement d'état d'authentification pour ce composant |
|  Type                 |  (nextAuthState : AuthState, data? : object) => void                    |
|  Par défaut,          |  dispatchAuthStateChangeEvent                                           |

| handleSubmit | .                                                                    |
| ------------ | -------------------------------------------------------------------- |
|  Description |  La fonction appelée lors de la soumission d'un nouveau mot de passe |
|  Type        |  (event : Event) => void                                             |
|  Par défaut, |  event => this.completeNewPassword(event)                            |

| headerText           | .                                                           |
| -------------------- | ----------------------------------------------------------- |
|  Attribut            |  header-text                                                |
|  Description         |  Le texte de l'en-tête de la section "Mot de passe oublié". |
|  Type                |  chaîne de caractères                                       |
|  Valeur par défaut : |  Translations.CHANGE_PASSWORD                               |

| submitButtonText     |  .                                                               |
| -------------------- | ---------------------------------------------------------------- |
|  Attribut            |  submit-button-text                                              |
|  Description         |  Le texte affiché à l'intérieur du bouton d'envoi du formulaire. |
|  Type                |  chaîne de caractères                                            |
|  Valeur par défaut : |  Translations.CHANGE_PASSWORD_ACTION                             |

| user         | .                                                                  |
| ------------ | ------------------------------------------------------------------ |
|  Description |  Utilisé pour le nom d'utilisateur à transmettre au code de renvoi |
|  Type        |  CognitoUserInterface                                              |

### TOTP Setup

**Usage**

```Html
<amplify-authenticator>
  <amplify-totp-setup
    header-text="My Custom TOTP Setup Text"
    slot="totp-setup"
  ></amplify-totp-setup>
</amplify-authenticator>
```

#### Propriétés

`amplify-totp-setup` fournit les propriétés suivantes pour configurer le composant.

| handleAuthStateChange | .                                                                      |
| --------------------- | ---------------------------------------------------------------------- |
| Description           | Gestionnaire de changement d'état d'authentification pour ce composant |
| Type                  | (nextAuthState : AuthState, data? : object) => void                    |
| Par défaut,           | dispatchAuthStateChangeEvent                                           |

| headerText          | .                                                                        |
| ------------------- | ------------------------------------------------------------------------ |
| Attribut            | header-text                                                              |
| Description         | Utilisé pour le texte d'en-tête dans le composant de configuration totp. |
| Type                | chaîne de caractères                                                     |
| Valeur par défaut : | Translations.TOTP_HEADER_TEXT                                            |

| issuer              | .                                                                           |
| ------------------- | --------------------------------------------------------------------------- |
| Attribut            | issuer                                                                      |
| Description         | Utilisé pour personnaliser la chaîne de l'émetteur dans l'image du code QR. |
| Type                | chaîne de caractères                                                        |
| Valeur par défaut : | Translations.TOTP_ISSUER                                                    |

| user        | .                                                    |
| ----------- | ---------------------------------------------------- |
| Description | Utilisé afin de configurer TOTP pour un utilisateur. |
| Type        | CognitoUserInterface                                 |

### Vérifier le contact

```html
<amplify-authenticator>
  <amplify-verify-contact
    header-text="My Custom Verify Contact Text"
    slot="verify-contact"
  ></amplify-verify-contact>
</amplify-authenticator>
```

#### Propriétés

`amplify-verify-contact` fournit les propriétés suivantes pour configurer le composant.

| handleAuthStateChange | .                                                   |
| --------------------- | --------------------------------------------------- |
| Description           | Gestionnaire d'état d'authentification              |
| Type                  | (nextAuthState : AuthState, data? : object) => void |
| Par défaut,           | dispatchAuthStateChangeEvent                        |

| user        | .                                                                  |
| ----------- | ------------------------------------------------------------------ |
| Description | Utilisateur dont les informations de contact ne sont pas vérifiées |
| Type        | CognitoUserInterface                                               |

### Greetings

**Usage**

_App.vue_

```html
<template>
  <div>
    <amplify-authenticator
      v-if="authState !== 'signedin'"
    ></amplify-authenticator>
    <div v-if="authState === 'signedin' && user">
      <amplify-greetings :username="user.username"></amplify-greetings>
    </div>
  </div>
</template>
```

```js
import { onAuthUIStateChange } from "@aws-amplify/ui-components";

export default {
  name: "AuthStateApp",
  created() {
    this.unsubscribeAuth = onAuthUIStateChange((authState, authData) => {
      this.authState = authState;
      this.user = authData;
    });
  },
  data() {
    return {
      user: undefined,
      authState: undefined,
      unsubscribeAuth: undefined,
    };
  },
  beforeDestroy() {
    this.unsubscribeAuth();
  },
};
```

#### Propriétés

`amplify-greetings` fournit les propriétés suivantes pour configurer le composant.

| handleAuthStateChange                                                              | .   |
| ---------------------------------------------------------------------------------- | --- |
| Description Gestionnaire de changement d'état d'authentification pour ce composant |
| Type (nextAuthState : AuthState, data? : object) => void                           |
| Par défaut, dispatchAuthStateChangeEvent                                           |

| logo                                                | .   |
| --------------------------------------------------- | --- |
| Description Logo affiché à l'intérieur de l'en-tête |
| Type Composant fonctionnel<{}>                      |
| Valeur par défaut null                              |

| user                                                              | .   |
| ----------------------------------------------------------------- | --- |
| Attribut nom d'utilisateur                                        |
| Description Nom d'utilisateur affiché dans les messages d'accueil |
| Type chaîne de caractères                                         |
| Défaut null                                                       |

#### Propriétés CSS personnalisées

`amplify-greetings` fournit les [propriétés CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) suivantes pour modifier le style au niveau du composant.

| Nom                  | Description                         |
| -------------------- | ----------------------------------- |
| `--background-color` | Couleur d'arrière-plan du conteneur |
| `--border-color`     | Couleur de la bordure du conteneur  |
| `--font-family`      | Famille de polices du texte         |

#### Emplacements

`amplify-greetings` fournit les emplacements suivants, basés sur l'élément [Web Components slot](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/slot).

|  Nom                 | Description                                                      |
| -------------------- | ---------------------------------------------------------------- |
|  `greetings-message` | Contenu placé dans le texte des salutations                      |
|  `logo`              | Contenu justifié à gauche, placé au début de la barre d'adresse. |
|  `nav`               | Contenu justifié à droite, placé à la fin de la barre de salut.  |

## Méthodes et Enums

### AuthState

`AuthState` est un enum avec les valeurs suivantes :

```js
enum AuthState {
  SignUp = 'signup',
  SignOut = 'signout',
  SignIn = 'signin',
  Loading = 'loading',
  SignedOut = 'signedout',
  SignedIn = 'signedin',
  SigningUp = 'signingup',
  ConfirmSignUp = 'confirmSignUp',
  confirmingSignUpCustomFlow = 'confirmsignupcustomflow',
  ConfirmSignIn = 'confirmSignIn',
  confirmingSignInCustomFlow = 'confirmingsignincustomflow',
  VerifyingAttributes = 'verifyingattributes',
  ForgotPassword = 'forgotpassword',
  ResetPassword = 'resettingpassword',
  SettingMFA = 'settingMFA',
  TOTPSetup = 'TOTPSetup',
  CustomConfirmSignIn = 'customConfirmSignIn',
  VerifyContact = 'verifyContact'
}
```

**Usage**

```js
import { AuthState, onAuthUIStateChange } from "@aws-amplify/ui-components";

onAuthUIStateChange((nextAuthState, authData) => {
  if (nextAuthState === AuthState.SignedIn) {
    console.log("user successfully signed in!");
  }
});
```

### onAuthUIStateChange

`onAuthUIStateChange` est une fonction qui se déclenchera à chaque fois que l'état du composant Authentication UI changera.

**Utilisation**

```js
import { AuthState, onAuthUIStateChange } from "@aws-amplify/ui-components";

onAuthUIStateChange((nextAuthState, authData) => {
  if (nextAuthState === AuthState.SignedIn) {
    console.log("user successfully signed in!");
    console.log("user data: ", authData);
  }
  if (!authData) {
    console.log("user is not signed in...");
  }
});
```

## Cas d'utilisation

### Gérer l'état d'authentification et le rendu conditionnel de l'application

_App.vue_

```html
<template>
  <div>
    <div v-if="authState !== 'signedin'">You are signed out.</div>
    <amplify-authenticator>
      <div v-if="authState === 'signedin' && user">
        <div>Hello, {{user.username}}</div>
      </div>
      <amplify-sign-out></amplify-sign-out>
    </amplify-authenticator>
  </div>
</template>
```

```js
import { onAuthUIStateChange } from "@aws-amplify/ui-components";

export default {
  name: "AuthStateApp",
  created() {
    this.unsubscribeAuth = onAuthUIStateChange((authState, authData) => {
      this.authState = authState;
      this.user = authData;
    });
  },
  data() {
    return {
      user: undefined,
      authState: undefined,
      unsubscribeAuth: undefined,
    };
  },
  beforeDestroy() {
    this.unsubscribeAuth();
  },
};
```

### Authentification avec l'email ou le numéro de téléphone

Le composant `amplify-authenticator` permet de s'authentifier ou de s'inscrire avec un `email` ou un `numéro de téléphone` au lieu du `username` par défaut.

Pour cela, vous devez d'abord configurer le pool d'utilisateurs pour autoriser l'email ou le numéro de téléphone comme nom d'utilisateur [en utilisant le workflow cli](https://docs.amplify.aws/cli/auth/overview/#configuring-auth-without-social-providers) ou via la [console Cognito](https://docs.aws.amazon.com/cognito/latest/developerguide/user-pool-settings-attributes.html#user-pool-settings-aliases-settings-option-2). Pour refléter cela dans le composant `amplify-authenticator`, vous pouvez utiliser la propriété `usernameAlias`. Elle peut prendre l'une des trois valeurs suivantes : `email`, `phone_number` ou `username`. La valeur par défaut est `username`.

```html
<amplify-authenticator username-alias="email"></amplify-authenticator>
```

### Remplacer l'inscription

Vous pouvez remplacer l'appel à la fonction [`signUp`](https://docs.amplify.aws/lib/auth/emailpassword/q/platform/js/) par la propriété `handleSignUp`. Par exemple, vous pouvez ajouter un [attribut personnalisé](https://docs.amplify.aws/lib/auth/emailpassword/q/platform/js/) comme suit :

_App.vue_

```html
<template>
  <amplify-authenticator>
    <amplify-sign-up
      slot="sign-up"
      :handleSignUp.prop="handleSignUp"
    ></amplify-sign-up>
  </amplify-authenticator>
</template>
<script>
  import { Auth } from "aws-amplify";

  export default {
    name: "Authenticator",
    methods: {
      handleSignUp(formData) {
        const param = {
          ...formData,
          attributes: {
            ...formData.attributes,
            "custom:favorite_flavor": "Cookie Dough",
          },
        };
        return Auth.signUp(param);
      },
    },
  };
</script>
```

## Migration

Pour migrer de l'utilisation de la bibliothèque `aws-amplify-<framework>` vers la dernière bibliothèque `@aws-amplify/ui-<framework>`, suivez les étapes ci-dessous :

### Installation

```diff
- yarn add aws-amplify-vue
+ yarn add @aws-amplify/ui-vue
```

### Utilisation

\_main.js

```diff
import Vue from 'vue';
import App from "./App.vue";
- import Amplify, * as AmplifyModules from 'aws-amplify'
- import { AmplifyPlugin } from 'aws-amplify-vue'
+ import '@aws-amplify/ui-vue';
+ import Amplify from 'aws-amplify';
+ import awsconfig from './aws-exports';

Amplify.configure(awsconfig);

new Vue({
  render: h => h(App),
}).$mount('#app');
```
